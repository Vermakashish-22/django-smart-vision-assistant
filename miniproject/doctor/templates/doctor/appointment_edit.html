{% extends 'base2.html' %}
{% load i18n static admin_adminlte %}

{% block title %} Appointment Edit {% endblock title %}
{% block bodyclass %} appointment-edit {% endblock bodyclass %}

{% block content %}
{% comment %} <div class="container">
    <div class="d-flex align-items-center justify-content-center" style="min-height: calc(100vh - 120px);">
        <div class="row w-100 justify-content-center">
            <div class="col-md-6 col-lg-5">
                <div class="card shadow-sm">
                    <div class="card-body p-4 text-center">
                        <h3 class="mb-4">Edit Appointment</h3>

                        <!-- ðŸ‘‡ Pass appointment.id to the URL -->
                        <form method="post" action="{% url 'appointment_update' appointment.id %}" enctype="multipart/form-data" autocomplete="off">
                            {% csrf_token %}

                            <!-- Patient Name -->
                            <div class="form-group text-left">
                                <label for="patient_name">Patient Name</label>
                                <input type="text" class="form-control" id="patient_name" name="patient_name"
                                    value="{{ appointment.patient_name }}" required>
                            </div>

                            <!-- Appointment Date -->
                            <div class="form-group text-left">
                                <label for="appointment_date">Date</label>
                                <input type="date" class="form-control" id="appointment_date" name="appointment_date"
                                    value="{{ appointment.appointment_date|date:'Y-m-d' }}" required>
                            </div>

                            <!-- Appointment Time -->
                            <div class="form-group text-left">
                                <label for="appointment_time">Time</label>
                                <input type="time" class="form-control" id="appointment_time" name="appointment_time"
                                    value="{{ appointment.appointment_time|time:'H:i' }}" required>
                            </div>

                            <!-- Reason -->
                            <div class="form-group text-left">
                                <label for="reason">Reason</label>
                                <input type="text" class="form-control" id="reason" name="reason"
                                    value="{{ appointment.reason }}" placeholder="Reason for appointment">
                            </div>

                            <!-- Profile Image -->
                            <div class="form-group text-left">
                                <label for="profile_image">Profile Image</label>
                                {% if appointment.profile_image %}
                                    <div class="mb-2">
                                        <img src="{{ appointment.profile_image.url }}" alt="Profile Image" class="img-thumbnail" style="max-height: 100px;">
                                    </div>
                                {% endif %}
                                <input type="file" class="form-control" id="profile_image" name="profile_image">
                            </div>

                            <!-- Status -->
                            <div class="form-group text-left">
                                <label for="status">Status</label>
                                <select class="form-control" id="status" name="status" required>
                                    <option value="">Select Status</option>
                                    <option value="Pending" {% if appointment.status == "Pending" %}selected{% endif %}>Pending</option>
                                    <option value="Approved" {% if appointment.status == "Approved" %}selected{% endif %}>Approved</option>
                                    <option value="Completed" {% if appointment.status == "Completed" %}selected{% endif %}>Completed</option>
                                    <option value="Cancelled" {% if appointment.status == "Cancelled" %}selected{% endif %}>Cancelled</option>
                                </select>
                            </div>

                            <!-- Submit -->
                            <button type="submit" class="btn btn-block" style="background-color:#134e4a; color:white;">Save Appointment</button>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} {% endcomment %}


<div class="min-h-screen bg-gray-100 py-10 px-4">
    <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-2xl overflow-hidden">
        <div class="bg-[#1A365D] text-white text-center py-4">
            <h2 class="text-2xl font-semibold">Edit Appointment</h2>
        </div>
        <div class="p-6">
            <form method="post" action="{% url 'appointment_update' appointment.id %}" enctype="multipart/form-data" autocomplete="off" class="space-y-5" style="font-family:'Crimson Text', serif;">
                {% csrf_token %}

                <!-- Patient Name -->
                <div>
                    <label for="patient_name" class="block text-sm font-medium text-gray-700 mb-1">Patient Name</label>
                    <input type="text" id="patient_name" name="patient_name"
                        value="{{ appointment.patient_name }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#1A365D] focus:border-[#1A365D]"
                        required>
                </div>

                <!-- Appointment Date -->
                <div>
                    <label for="appointment_date" class="block text-sm font-medium text-gray-700 mb-1">Appointment Date</label>
                    <input type="date" id="appointment_date" name="appointment_date"
                        value="{{ appointment.appointment_date|date:'Y-m-d' }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#1A365D] focus:border-[#1A365D]"
                        required>
                </div>

                <!-- Appointment Time -->
                <div>
                    <label for="appointment_time" class="block text-sm font-medium text-gray-700 mb-1">Appointment Time</label>
                    <input type="time" id="appointment_time" name="appointment_time"
                        value="{{ appointment.appointment_time|time:'H:i' }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#1A365D] focus:border-[#1A365D]"
                        required>
                </div>

                <!-- Reason -->
                <div>
                    <label for="reason" class="block text-sm font-medium text-gray-700 mb-1">Reason</label>
                    <input type="text" id="reason" name="reason"
                        value="{{ appointment.reason }}"
                        placeholder="Reason for appointment"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#1A365D] focus:border-[#1A365D]">
                </div>

                <!-- Profile Image -->
                <div>
                    <label for="profile_image" class="block text-sm font-medium text-gray-700 mb-1">Profile Image</label>
                    {% if appointment.profile_image %}
                        <div class="mb-2">
                            <img src="{{ appointment.profile_image.url }}" alt="Profile Image" class="rounded-md shadow-md max-h-24">
                        </div>
                    {% endif %}
                    <input type="file" id="profile_image" name="profile_image"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none">
                </div>

                <!-- Status -->
                <div>
                    <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                    <select id="status" name="status" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#1A365D] focus:border-[#1A365D]">
                        <option value="">Select Status</option>
                        <option value="Pending" {% if appointment.status == "Pending" %}selected{% endif %}>Pending</option>
                        <option value="Approved" {% if appointment.status == "Approved" %}selected{% endif %}>Approved</option>
                        <option value="Completed" {% if appointment.status == "Completed" %}selected{% endif %}>Completed</option>
                        <option value="Cancelled" {% if appointment.status == "Cancelled" %}selected{% endif %}>Cancelled</option>
                    </select>
                </div>

                <!-- Submit -->
                <div class="pt-4">
                    <button type="submit" class="w-full bg-[#1A365D] text-white font-semibold py-2 rounded-md hover:bg-[#163055] transition duration-200">
                        Save Appointment
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}