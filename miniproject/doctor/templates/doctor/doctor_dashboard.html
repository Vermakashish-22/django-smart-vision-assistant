{% extends 'base2.html' %}
{% load static %}

{% block title %}Doctor Dashboard{% endblock title %}

{% block content %}
{% comment %} <div class="min-h-screen bg-gray-100 p-6">
    
    <div class="flex justify-end space-x-4 mb-4">
        <a href="{% url 'appointment_list' %}" 
            class="bg-white text-blue-600 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-100 transition">
            View Appointments
        </a>

        <a href="{% url 'logout' %}" 
            class="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg shadow transition flex items-center">
            <i class="fas fa-sign-out-alt mr-2"></i> Logout
        </a>
    </div>

    <!-- Top Blue Banner -->
    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-2xl shadow-lg px-6 my-4 
            flex justify-around items-center transition-shadow duration-300">

    <!-- Left: Welcome Text -->
    <div>
        <h1 class="text-3xl font-bold">Welcome, Dr. {{ request.user.first_name }}</h1>
        <p class="mt-2 text-lg opacity-90">Have a nice day at work</p>
    </div>

    <!-- Right: Doctor Animation -->
    <div class="flex items-end hover:drop-shadow-2xl transition-all duration-300">
        <dotlottie-wc
            src="https://lottie.host/b0ee2421-99d0-4204-9784-9189d8979e3c/3hqKVPIEXR.lottie"
            style="width: 350px; height:300px;"
            class="mr-lg"
            speed="1"
            autoplay
            loop
        ></dotlottie-wc>
    </div>

</div>

    <!-- Stats Section -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">

        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:scale-95 hover:shadow-xl hover:border-orange-500 transition-all duration-300">
            <h3 class="text-lg font-semibold text-gray-700 mb-2">Total Patients</h3>
            <p class="text-3xl font-bold text-blue-600">{{ patient_count }}</p>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:scale-95 hover:shadow-xl hover:border-orange-500 transition-all duration-300">
            <h3 class="text-lg font-semibold text-gray-700 mb-2 ">Consultations</h3>
            <p class="text-3xl font-bold text-yellow-500">{{ consultation_count }}</p>
        </div>


    </div>

    <!-- Recent Patients -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Recent Patients</h3>

        <ul class="divide-y divide-gray-200">
            {% for patient in recent_patients %}
                <li class="py-2 px-2 flex items-center justify-between hover:bg-gray-100 transition duration-200 rounded-lg">
                    <span>{{ patient.name }} (Age: {{ patient.age }}, Blood Group: {{ patient.blood_group }})</span>
                    <span class="text-sm text-gray-500">ID: {{ patient.id }}</span>
                </li>
            {% empty %}
                <li>No patients found.</li>
            {% endfor %}
        </ul>
    </div>

</div>

<script
    src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js"
    type="module">
</script>
{% endblock %} {% endcomment %}


<div class="min-h-screen bg-gray-200 px-4 py-6">

    <!-- Top Right Buttons -->
        <div class="flex justify-end space-x-4 mb-6">
            <a href="{% url 'appointment_list' %}" 
                class="bg-red-700 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-red-500 transition">
                View Appointments
            </a>
        </div>

    <!-- Header Section -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 flex flex-col md:flex-row justify-center items-center">
        <!-- Welcome Text -->
        <div class="text-center md:text-left">
            <h1 class="text-3xl font-bold text-[#1A365D]">Welcome, Dr. {{ request.user.first_name }}</h1>
            <p class="mt-2 text-gray-600 text-lg">Have a nice day at work</p>
        </div>
        <!-- Doctor Animation -->
        <div class="md:mt-0">
            <dotlottie-wc src="https://lottie.host/b1f04865-9fd2-46fe-9a37-c88c8f6f01e0/7JDAeWWHH7.lottie"
                style="width: 500px;height: 500px"
                speed="1" autoplay loop> 
            </dotlottie-wc>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <div class="bg-[#1A365D] rounded-xl shadow-md p-6 text-center hover:scale-95 hover:shadow-xl transition-all duration-300">
            <h3 class="text-lg font-semibold text-white mb-2">Total Patients</h3>
            <p class="text-4xl font-bold text-white">{{ patient_count }}</p>
        </div>

        <div class="bg-[#1A365D] rounded-xl shadow-md p-6 text-center hover:scale-95 hover:shadow-xl transition-all duration-300">
            <h3 class="text-lg font-semibold text-white mb-2">Consultations</h3>
            <p class="text-4xl font-bold text-white">{{ consultation_count }}</p>
        </div>
    </div>

    <!-- Recent Patients List -->
    <div class="bg-white rounded-xl shadow-md p-6">
        <h3 class="text-xl font-semibold text-[#1A365D] mb-4">Recent Patients</h3>
        <ul class="divide-y divide-gray-300">
            {% for patient in recent_patients %}
                <li class="py-2 px-2 flex items-center justify-between hover:bg-gray-100 rounded-lg transition">
                    <span class="text-gray-800">{{ patient.name }} (Age: {{ patient.age }}, Blood Group: {{ patient.blood_group }})</span>
                    <span class="text-sm text-gray-500">ID: {{ patient.id }}</span>
                </li>
            {% empty %}
                <li class="text-gray-500">No patients found.</li>
            {% endfor %}
        </ul>
    </div>

</div>

<script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js" type="module"></script>
{% endblock %}
